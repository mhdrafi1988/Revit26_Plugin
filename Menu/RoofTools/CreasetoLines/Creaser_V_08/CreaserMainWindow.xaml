<Window x:Class="Revit26_Plugin.Creaser_V08.Commands.UI.CreaserMainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Creaser"
        Height="620"
        Width="460"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <!-- ================= RESOURCES ================= -->
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis"/>
    </Window.Resources>

    <!-- ================= LAYOUT ================= -->
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Options -->
            <RowDefinition Height="Auto"/>
            <!-- Detail Item -->
            <RowDefinition Height="Auto"/>
            <!-- Run -->
            <RowDefinition Height="*"/>
            <!-- Log -->
            <RowDefinition Height="Auto"/>
            <!-- Close -->
        </Grid.RowDefinitions>

        <!-- ===================================================== -->
        <!-- OPTIONS -->
        <!-- ===================================================== -->
        <GroupBox Header="Options" Margin="0,0,0,8">
            <Grid Margin="8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <TextBlock Text="Drain cluster radius (mm)"
                           VerticalAlignment="Center"/>
                <TextBox Grid.Column="1"
                         Text="{Binding DrainRadiusMm}"
                         Margin="4,2"/>

                <TextBlock Grid.Row="1"
                           Text="Tolerance (mm)"
                           VerticalAlignment="Center"/>
                <TextBox Grid.Row="1"
                         Grid.Column="1"
                         Text="{Binding ToleranceMm}"
                         Margin="4,2"/>
            </Grid>
        </GroupBox>

        <!-- ===================================================== -->
        <!-- DETAIL ITEM (LINE-BASED) -->
        <!-- ===================================================== -->
        <GroupBox Grid.Row="1"
                  Header="Detail Item (Line-Based)"
                  Margin="0,0,0,8">
            <StackPanel Margin="8">

                <!-- ComboBox -->
                <ComboBox ItemsSource="{Binding DetailItemSymbols}"
                          SelectedItem="{Binding SelectedDetailItemSymbol}"
                          DisplayMemberPath="DisplayName"
                          Height="24"/>

                <!-- Empty-state message -->
                <TextBlock Margin="2,6,2,0"
                           FontSize="11"
                           Foreground="DarkRed"
                           TextWrapping="Wrap"
                           Text="No line-based Detail Item families are loaded in this project.
Load a family created from the 'Detail Item – Line Based' template."
                           Visibility="{Binding HasDetailItemFamilies,
                                                Converter={StaticResource BoolToVis},
                                                ConverterParameter=False}"/>

                <!-- Help text -->
                <TextBlock Margin="2,6,2,0"
                           FontSize="11"
                           Foreground="Gray"
                           TextWrapping="Wrap"
                           Text="If a Detail Item family is selected, line-based detail components will be placed.
If none is selected, detail lines will be created instead."/>
            </StackPanel>
        </GroupBox>

        <!-- ===================================================== -->
        <!-- RUN -->
        <!-- ===================================================== -->
        <Button Grid.Row="2"
                Content="Run"
                Height="34"
                Margin="0,0,0,8"
                Command="{Binding RunCommand}"/>

        <!-- ===================================================== -->
        <!-- LOG -->
        <!-- ===================================================== -->
        <GroupBox Grid.Row="3" Header="Log">
            <TextBox Text="{Binding LogText}"
         IsReadOnly="True"
         AcceptsReturn="True"
         VerticalScrollBarVisibility="Auto"
         HorizontalScrollBarVisibility="Auto"/>

        </GroupBox>

        <!-- ===================================================== -->
        <!-- CLOSE -->
        <!-- ===================================================== -->
        <Button Grid.Row="4"
                Content="Close"
                Height="30"
                Width="100"
                Margin="0,8,0,0"
                HorizontalAlignment="Right"
                Command="{Binding CloseCommand}"/>
    </Grid>
</Window>
