<Window x:Class="Revit26_Plugin.SARV6.Views.SectionsListWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:Revit26_Plugin.SARV6.ViewModels"
        xmlns:conv="clr-namespace:Revit26_Plugin.SARV6.Views.Converters"
        Title="Section Auto Renamer V6.1"
        Height="820"
        Width="1200">

    <Window.Resources>
        <conv:LogLevelToBrushConverter x:Key="LogBrush"/>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="180"/>
        </Grid.RowDefinitions>

        <!-- TOP BAR -->
        <WrapPanel Margin="0,0,0,8">
            <CheckBox Content="Dry Run" IsChecked="{Binding IsDryRun}"/>

            <TextBlock Text="Sheet:"/>
            <ComboBox Width="120"
                      ItemsSource="{Binding SheetFilters}"
                      SelectedItem="{Binding SelectedSheetFilter}"/>

            <TextBlock Text="Search:"/>
            <TextBox Width="100"
                     Text="{Binding SheetSearchText, UpdateSourceTrigger=PropertyChanged}"/>

            <TextBlock Text="Duplicate Fix:" VerticalAlignment="Center" Margin="10,0,0,0"/>

            <ComboBox Width="170"
                      SelectedItem="{Binding DuplicateStrategy}"
                      ItemsSource="{Binding DuplicateFixStrategies}">
            </ComboBox>


        </WrapPanel>

        <!-- GRID -->
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding SectionsView}"
                  IsReadOnly="True"
                  AutoGenerateColumns="False">

            <DataGrid.Columns>
                <DataGridTextColumn Header="Edit"
                                    Binding="{Binding EditableName, UpdateSourceTrigger=PropertyChanged}"
                                    IsReadOnly="False">
                    <DataGridTextColumn.EditingElementStyle>
                        <Style TargetType="TextBox">
                            <Setter Property="Background" Value="#C8E6C9"/>
                        </Style>
                    </DataGridTextColumn.EditingElementStyle>
                </DataGridTextColumn>

                <DataGridTextColumn Header="Preview" Binding="{Binding PreviewName}"/>
                <DataGridTextColumn Header="Sheet" Binding="{Binding SheetNumber}"/>
                <DataGridTextColumn Header="Detail" Binding="{Binding DetailNumber}"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- ACTIONS + LOG -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <StackPanel>
                <Button Content="Preview" Command="{Binding PreviewCommand}"/>
                <Button Content="Commit Rename" Command="{Binding CommitRenameCommand}"/>
            </StackPanel>

            <Border Grid.Column="1" Margin="10,0,0,0">
                <ListBox ItemsSource="{Binding Logs}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Message}"
                                       Foreground="{Binding Level, Converter={StaticResource LogBrush}}"/>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Border>
        </Grid>
    </Grid>
</Window>
