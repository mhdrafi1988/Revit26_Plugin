<Window x:Class="Revit26_Plugin.DwgSymbolicConverter_V03.Views.DwgSymbolicConverterView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:conv="clr-namespace:Revit26_Plugin.DwgSymbolicConverter_V03.Helpers"
        Title="DWG Symbolic Converter"
        Height="560"
        Width="520"
        WindowStartupLocation="CenterOwner">

    <!-- ===================== -->
    <!-- Resources -->
    <!-- ===================== -->
    <Window.Resources>
        <conv:BooleanToEnumConverter x:Key="BoolToEnum"/>
    </Window.Resources>

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ===================== -->
        <!-- CAD IMPORT SELECTION -->
        <!-- ===================== -->
        <StackPanel Grid.Row="0" Margin="0,0,0,10">
            <TextBlock Text="Select CAD Import"
                       FontWeight="Bold"
                       Margin="0,0,0,4"/>
            <ComboBox ItemsSource="{Binding AvailableCads}"
                      SelectedItem="{Binding SelectedCad}"
                      MinHeight="26"/>
        </StackPanel>

        <!-- ===================== -->
        <!-- PLACEMENT MODE -->
        <!-- ===================== -->
        <GroupBox Grid.Row="1"
                  Header="Placement Mode"
                  Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" Margin="6">
                <RadioButton Content="Symbolic Only"
                             IsChecked="{Binding PlacementMode,
                             Converter={StaticResource BoolToEnum},
                             ConverterParameter=SymbolicOnly}"/>

                <RadioButton Content="Model Only"
                             Margin="12,0,0,0"
                             IsChecked="{Binding PlacementMode,
                             Converter={StaticResource BoolToEnum},
                             ConverterParameter=ModelOnly}"/>

                <RadioButton Content="Symbolic + Model"
                             Margin="12,0,0,0"
                             IsChecked="{Binding PlacementMode,
                             Converter={StaticResource BoolToEnum},
                             ConverterParameter=SymbolicAndModel}"/>
            </StackPanel>
        </GroupBox>

        <!-- ===================== -->
        <!-- SPLINE HANDLING -->
        <!-- ===================== -->
        <GroupBox Grid.Row="2"
                  Header="Spline Handling"
                  Margin="0,0,0,10">
            <StackPanel Orientation="Horizontal" Margin="6">
                <RadioButton Content="Preserve Splines"
                             IsChecked="{Binding SplineHandlingMode,
                             Converter={StaticResource BoolToEnum},
                             ConverterParameter=Preserve}"/>

                <RadioButton Content="Tessellate"
                             Margin="12,0,0,0"
                             IsChecked="{Binding SplineHandlingMode,
                             Converter={StaticResource BoolToEnum},
                             ConverterParameter=Tessellate}"/>
            </StackPanel>
        </GroupBox>

        <!-- ===================== -->
        <!-- EXTRUSION READY MODE -->
        <!-- ===================== -->
        <CheckBox Grid.Row="3"
                  Content="Extrusion-ready mode (snap endpoints, detect loops)"
                  IsChecked="{Binding ExtrusionReadyMode}"
                  Margin="0,0,0,10"/>

        <!-- ===================== -->
        <!-- CONVERT + LOG -->
        <!-- ===================== -->
        <Grid Grid.Row="4">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Convert Button -->
            <Button Grid.Row="0"
                    Content="Convert DWG"
                    Height="34"
                    Command="{Binding ConvertCommand}"
                    Margin="0,0,0,8"/>

            <!-- LOG PANEL (COPYABLE) -->
            <ListBox Grid.Row="1"
                     ItemsSource="{Binding LogEntries}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <!-- TextBox used intentionally so user can COPY -->
                        <TextBox Text="{Binding Message}"
                                 Foreground="{Binding Color}"
                                 Background="AliceBlue"
                                 BorderThickness="0"
                                 IsReadOnly="True"
                                 TextWrapping="Wrap"
                                 Focusable="True"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>
    </Grid>
</Window>
