<Window x:Class="BatchDwgFamilyLinker.UI.BatchLinkWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Batch DWG → Family Loader"
        Height="700"
        Width="1000"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="220"/>
        </Grid.RowDefinitions>

        <!-- ================= HEADER ================= -->
        <Border Grid.Row="0"
                Background="#F3F3F3"
                BorderBrush="#D0D0D0"
                BorderThickness="1"
                CornerRadius="4"
                Padding="12"
                Margin="0,0,0,10">

            <StackPanel>
                <TextBlock Text="Batch DWG → Revit Family Loader"
                           FontSize="18"
                           FontWeight="SemiBold"/>
                <TextBlock Text="Link or import AutoCAD files into multiple Revit families"
                           Foreground="Gray"
                           Margin="0,4,0,0"/>
            </StackPanel>
        </Border>

        <!-- ================= MAIN CONTENT ================= -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="420"/>
            </Grid.ColumnDefinitions>

            <!-- ================= LEFT : INPUTS ================= -->
            <Border Grid.Column="0"
                    BorderBrush="#CFCFCF"
                    BorderThickness="1"
                    CornerRadius="4"
                    Padding="12"
                    Margin="0,0,10,0">

                <StackPanel>

                    <!-- FAMILY FOLDER -->
                    <GroupBox Header="Revit Family Folder" Margin="0,0,0,10">
                        <DockPanel>
                            <TextBox Text="{Binding FamilyFolderPath, UpdateSourceTrigger=PropertyChanged}"
                                     ToolTip="Paste or type full folder path"
                                     VerticalContentAlignment="Center"
                                     Margin="0,0,6,0" Width="416"/>
                            <Button Content="Browse"
                                    Width="90"
                                    Command="{Binding BrowseFamilyFolderCommand}"/>
                        </DockPanel>
                    </GroupBox>

                    <!-- DWG FOLDER -->
                    <GroupBox Header="AutoCAD DWG Folder" Margin="0,0,0,10">
                        <DockPanel>
                            <TextBox Text="{Binding DwgFolderPath, UpdateSourceTrigger=PropertyChanged}"
                                     ToolTip="Paste or type full folder path"
                                     VerticalContentAlignment="Center"
                                     Margin="0,0,6,0" Width="415"/>
                            <Button Content="Browse"
                                    Width="90"
                                    Command="{Binding BrowseDwgFolderCommand}"/>
                        </DockPanel>
                    </GroupBox>

                    <!-- DWG LOAD MODE -->
                    <GroupBox Header="DWG Load Mode" Margin="0,0,0,10">
                        <StackPanel>
                            <RadioButton Content="Link DWG (Default / Recommended)"
                                         IsChecked="{Binding IsLinkMode}"
                                         Margin="0,4"/>
                            <RadioButton Content="Import DWG"
                                         IsChecked="{Binding IsImportMode}"
                                         Margin="0,4"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- PLACEMENT MODE -->
                    <GroupBox Header="DWG Placement Mode" Margin="0,0,0,10">
                        <StackPanel>
                            <RadioButton Content="Origin to Origin"
                                         IsChecked="{Binding IsOriginToOrigin}"
                                         Margin="0,4"/>
                            <RadioButton Content="Center to Center"
                                         IsChecked="{Binding IsCenterToCenter}"
                                         Margin="0,4"/>
                        </StackPanel>
                    </GroupBox>

                    <!-- ACTION BUTTONS -->
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Right"
                                Margin="0,20,0,0">

                        <Button Content="Start Batch"
                                Width="140"
                                Height="38"
                                Margin="0,0,10,0"
                                Command="{Binding StartBatchCommand}"
                                IsEnabled="{Binding CanStart}"/>

                        <Button Content="Close"
                                Width="90"
                                Height="38"
                                Command="{Binding CloseCommand}"/>
                    </StackPanel>

                </StackPanel>
            </Border>

            <!-- ================= RIGHT : SUMMARY ================= -->
            <Border Grid.Column="1"
                    BorderBrush="#CFCFCF"
                    BorderThickness="1"
                    CornerRadius="4"
                    Padding="12">

                <StackPanel>

                    <TextBlock Text="Batch Summary"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Margin="0,0,0,10"/>

                    <UniformGrid Columns="2" Rows="3" Margin="0,0,0,12">

                        <TextBlock Text="Total Families"/>
                        <TextBlock Text="{Binding TotalFamilies}" FontWeight="SemiBold"/>

                        <TextBlock Text="Processed"/>
                        <TextBlock Text="{Binding ProcessedCount}" FontWeight="SemiBold"/>

                        <TextBlock Text="Failures"/>
                        <TextBlock Text="{Binding FailedCount}"
                                   Foreground="DarkRed"
                                   FontWeight="SemiBold"/>

                    </UniformGrid>

                    <ProgressBar Height="18"
                                 Minimum="0"
                                 Maximum="{Binding TotalFamilies}"
                                 Value="{Binding ProcessedCount}"/>

                </StackPanel>
            </Border>
        </Grid>

        <!-- ================= LIVE LOG ================= -->
        <Border Grid.Row="2"
                BorderBrush="#CFCFCF"
                BorderThickness="1"
                CornerRadius="4"
                Padding="8"
                Margin="0,10,0,0">

            <DockPanel>

                <TextBlock DockPanel.Dock="Top"
                           Text="Live Processing Log"
                           FontWeight="SemiBold"
                           Margin="0,0,0,6"/>

                <TextBox Text="{Binding LiveLog}"
                         IsReadOnly="True"
                         AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"
                         HorizontalScrollBarVisibility="Auto"
                         FontFamily="Consolas"
                         FontSize="12"/>
            </DockPanel>
        </Border>

    </Grid>
</Window>
