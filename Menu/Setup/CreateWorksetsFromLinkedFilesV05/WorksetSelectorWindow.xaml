<Window x:Class="Revit26_Plugin.WSA_V05.Views.WorksetSelectorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Workset Assignment"
        Width="1000"
        Height="650"
        Background="#FFF2F2F2"
        ResizeMode="CanResize">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="180"/>
        </Grid.RowDefinitions>

        <!-- ===== Controls ===== -->
        <StackPanel Orientation="Horizontal" Margin="10">

            <TextBox Width="60" Text="{Binding PlusPrefix}" ToolTip="Plus prefix"/>
            <TextBox Width="80" Margin="5,0" Text="{Binding LinkWord}" ToolTip="Link word"/>

            <TextBlock Text="(" VerticalAlignment="Center" Margin="2,0"/>
            <TextBlock Text="Name" VerticalAlignment="Center" Foreground="#777"/>
            <TextBox Width="60" Margin="2,0" Text="{Binding ZeroSuffix}" ToolTip="Optional suffix"/>
            <TextBlock Text=")" VerticalAlignment="Center"/>

            <Button Content="All" Width="60" Margin="10,0" Command="{Binding SelectAllCommand}"/>
            <Button Content="None" Width="60" Command="{Binding SelectNoneCommand}"/>
            <Button Content="Reverse" Width="80" Margin="5,0" Command="{Binding ReverseSelectionCommand}"/>

            <Button Content="Create WS" Width="110" Margin="20,0" Command="{Binding CreateCommand}"/>
            <Button Content="Re-Sync" Width="90" Command="{Binding ReSyncCommand}"/>
        </StackPanel>

        <!-- ===== Grid ===== -->
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Links}"
                  AutoGenerateColumns="False"
                  Margin="10"
                  FontSize="13">

            <DataGrid.RowStyle>
                <Style TargetType="DataGridRow">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding WorksetExists}" Value="True">
                            <Setter Property="Background" Value="#FFFFE5E5"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding WorksetExists}" Value="False">
                            <Setter Property="Background" Value="#FFE5FFE5"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </DataGrid.RowStyle>

            <DataGrid.Columns>
                <DataGridCheckBoxColumn Binding="{Binding IsSelected}" Width="40"/>
                <DataGridTextColumn Header="Link File" Binding="{Binding LinkName}" Width="*"/>
                <DataGridTextColumn Header="Target Workset" Binding="{Binding TargetWorkset}" Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- ===== Log ===== -->
        <Border Grid.Row="2" Margin="10" Background="#FF1E1E1E">
            <ListBox ItemsSource="{Binding Log}"
                     FontFamily="Consolas"
                     Foreground="#FFDADADA"
                     BorderThickness="0"/>
        </Border>
    </Grid>
</Window>
